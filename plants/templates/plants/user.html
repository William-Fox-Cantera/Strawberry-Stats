{% extends 'plants/main.html' %}
{% load static %}
{% block content %}
{% include 'plants/status.html' %}

<style>
    .instructions {
        text-align: center;
        font-size: 24px;
        font-family: fantasy;
    }
    .button {
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        display: inline-block;
        border-radius: 4px;
        background-color: #f4511e;
        border: none;
        color: #FFFFFF;
        text-align: center;
        font-size: 28px;
        padding: 20px;
        width: 200px;
        transition: all 0.5s;
        cursor: pointer;
        margin: 5px;
    }

    .button span {
        cursor: pointer;
        display: inline-block;
        position: relative;
        transition: 0.5s;
    }

    .button span:after {
        content: '\00bb';
        position: absolute;
        opacity: 0;
        top: 0;
        right: -20px;
        transition: 0.5s;
    }

    .button:hover span {
        padding-right: 25px;
    }

    .button:hover span:after {
        opacity: 1;
        right: 0;
    }

    .card-body {
        width: 500px;
    }

    .view-button {
        top: 70%;
    }

    .messages {
        background-color: rgb(73, 68, 68);
        color: #FFFFFF;
        margin-top: 15px;
    }

    .submit-box {
        display: inline-block;
        width: 500px;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 49%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }

    .uploaded-box {
        width: 200px;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 73%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }
</style>

{% if should_generate %} <!-- Renders the file upload once the start button is pressed -->
<div>
    <p class="instructions">
        Upload your csv file, hit submit, then press the view button
    </p>
</div>
<div class="submit-box col-md-9">
    <div class="card card-body">
        <form method="POST" action="{% url 'csv_upload' True %}" enctype="multipart/form-data">
            {% csrf_token %}
            {{form.as_p}}
            <input class="btn btn-primary"  type="submit" name="Update Information">
            <br>
            <!-- Django error message displayer -->
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </form>
    </div>
</div>
<div>
    <a class="view-button button" href="{% url 'csv_upload' True %}" style="vertical-align:middle"><span>view</span></a>
</div>
{% else %} <!-- Button to start the process -->
<div class="instructions">
    <p>
        Welcome to the site, press the button below to get started!
    </p>
</div>
<div>
    <a class="button" href="{% url 'csv_upload' False %}" style="vertical-align:middle"><span>Start</span></a>
</div>
{% endif %}

{% endblock content %}